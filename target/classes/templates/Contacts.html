<!DOCTYPE html>
<html lang="en">

<head>

<!-- TITLE -->	
	<title>Contacts</title>

<!-- HEAD CONTENT -->		
    <div th:replace="~{fragments/head :: head}"></div>

</head>

<body>

<!-- HEADER -->
 	<div th:replace="~{fragments/header :: header}"></div>

<!-- SIDEBAR -->
 	<div th:replace="~{fragments/sidebar :: sidebar}"></div>

<!-- MAIN -->
<main id="main" class="main">

	<div class="pagetitle">
		<h1>Contacts</h1>
	</div>

	<section class="section">
		<div class="row">
			<div class="card">
				<div class="card-body">

					<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal">Add Contact</button>
              
<!-- TABLE -->
				<table class="table datatable">
					<thead>
						<tr>
							<th>Company</th>
							<th>Name</th>
							<th>Title</th>
							<th>Email</th>
							<th>Phone</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="contacts:${contacts}">
							<td th:text="${contacts.company}"></td>
							<td th:text="${contacts.name}"></td>
							<td th:text="${contacts.title}"></td>
							<td th:text="${contacts.email}"></td>
							<td th:text="${contacts.phone}"></td>
							<td>
								<div class="btn-group">
									<a th:href="@{/contacts/findById(id=${contacts.id})}" class="btn btn-primary" id="editButton"
									data-bs-toggle="modal" data-bs-target="#editModal">Edit</a>
									
									<a th:href="@{/contacts/delete(id=${contacts.id})}" class="btn btn-danger" id="deleteButton"
									data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</a>						     
								</div>
							</td>
						</tr>
					</tbody>
				</table>
<!-- END TABLE -->
		
				</div>
			</div>
		</div>
	</section>
</main>
<!-- END MAIN -->

<!-- ADD MODAL -->
	<div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="addModalLabel">New Contact</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">
	        <form th:action="@{/contacts/addNew}" method="post">

	          <div class="mb-3">
	            <label for="company" class="col-form-label">Company:</label>
	            <input type="text" class="form-control" id="capitalAdd" name="company">
	          </div>
	          
	          <div class="mb-3">
	            <label for="name" class="col-form-label">Name:</label>
	            <input type="text" class="form-control" id="nameAdd" name="name" required>
	          </div>
	          
	          <div class="mb-3">
	            <label for="title" class="col-form-label">Title:</label>
	            <input type="text" class="form-control" id="titleAdd" name="title">
	          </div>
	          
	          <div class="mb-3">
	            <label for="email" class="col-form-label">Email:</label>
	            <input type="email" class="form-control" id="emailAdd" name="email">
	          </div>
	          
	          <div class="mb-3">
	            <label for="phone" class="col-form-label">Phone:</label>
	            <input type="text" class="form-control" id="phoneAdd" name="phone">
	          </div>
	  
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
	        <button type="submit" class="btn btn-primary">Submit</button>
	      </div>
	    </div>
	  </div>
	</form>
	</div>
<!-- END ADD MODAL -->

<!-- EDIT MODAL -->
	<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true">
	 <form th:action="@{/contacts/update}" method="put"> 
	  <div class="modal-dialog" role="document">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="editModalLabel">Edit Contact Data</h5>
	        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
	      </div>
	      <div class="modal-body">

	          <div class="form-group">
	            <input type="hidden" class="form-control" id="idEdit" name="id" readonly>
	          </div>

	          <div class="form-group">
	            <label for="company" class="col-form-label">Company:</label>
	            <input type="text" class="form-control" id="companyEdit" name="company">
	          </div>
	          
	          <div class="form-group">
	            <label for="name" class="col-form-label">Name:</label>
	            <input type="text" class="form-control" id="nameEdit" name="name" required>
	          </div>  
	          
	          <div class="form-group">
	            <label for="title" class="col-form-label">Title:</label>
	            <input type="text" class="form-control" id="titleEdit" name="title">
	          </div>
	          
	          <div class="form-group">
	            <label for="email" class="col-form-label">Email:</label>
	            <input type="email" class="form-control" id="emailEdit" name="email">
	          </div>
	          
	          <div class="form-group">
	            <label for="phone" class="col-form-label">Phone:</label>
	            <input type="text" class="form-control" id="phoneEdit" name="phone">
	          </div>              
	                 
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
	        <button type="submit" class="btn btn-primary">Save</button>
	      </div>
	    </div>
	  </div>
	</form>
	</div>
<!-- END EDIT MODAL -->

<!-- DELETE MODAL -->
    <div th:replace="~{fragments/delete :: delete}"></div>	

<!-- BACK TO TOP -->
	<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

<!-- JAVASCRIPT -->
<div th:replace="~{fragments/javascript :: javascript}"></div>
<script src="assets/js/contacts.js"></script>

</body>

</html>